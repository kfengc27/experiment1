{"ast":null,"code":"import { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport { forwardRef, useRef, useCallback, useImperativeHandle, Fragment, cloneElement } from 'react';\nimport { oneOfType, element, func } from 'prop-types';\nimport { ControlledMenu } from './ControlledMenu.js';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { useMenuStateAndFocus } from '../hooks/useMenuStateAndFocus.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\nimport { isMenuOpen, safeCall, mergeProps, getName } from '../utils/utils.js';\nimport { useMenuChange } from '../hooks/useMenuChange.js';\nimport { uncontrolledMenuPropTypes, rootMenuPropTypes } from '../utils/propTypes.js';\nimport { FocusPositions, Keys } from '../utils/constants.js';\nvar _excluded = [\"aria-label\", \"captureFocus\", \"menuButton\", \"instanceRef\", \"onMenuChange\"];\nvar Menu = /*#__PURE__*/forwardRef(function Menu(_ref, externalRef) {\n  var ariaLabel = _ref['aria-label'],\n      menuButton = _ref.menuButton,\n      instanceRef = _ref.instanceRef,\n      onMenuChange = _ref.onMenuChange,\n      restProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useMenuStateAndFocus = useMenuStateAndFocus(restProps),\n      stateProps = _useMenuStateAndFocus[0],\n      toggleMenu = _useMenuStateAndFocus[1],\n      openMenu = _useMenuStateAndFocus[2];\n\n  var isOpen = isMenuOpen(stateProps.state);\n  var skipOpen = useRef(false);\n  var buttonRef = useRef(null);\n  var handleClose = useCallback(function (e) {\n    toggleMenu(false);\n    if (e.key) buttonRef.current.focus();\n  }, [toggleMenu]);\n\n  var onClick = function onClick(e) {\n    if (skipOpen.current) return;\n    openMenu(e.detail === 0 ? FocusPositions.FIRST : undefined);\n  };\n\n  var onKeyDown = function onKeyDown(e) {\n    switch (e.key) {\n      case Keys.UP:\n        openMenu(FocusPositions.LAST);\n        break;\n\n      case Keys.DOWN:\n        openMenu(FocusPositions.FIRST);\n        break;\n\n      default:\n        return;\n    }\n\n    e.preventDefault();\n  };\n\n  var button = safeCall(menuButton, {\n    open: isOpen\n  });\n  if (!button || !button.type) throw new Error('Menu requires a menuButton prop.');\n\n  var buttonProps = _extends({\n    ref: useCombinedRef(button.ref, buttonRef)\n  }, mergeProps({\n    onClick: onClick,\n    onKeyDown: onKeyDown\n  }, button.props));\n\n  if (getName(button.type) === 'MenuButton') {\n    buttonProps.isOpen = isOpen;\n  }\n\n  var renderButton = /*#__PURE__*/cloneElement(button, buttonProps);\n  useMenuChange(onMenuChange, isOpen);\n  useImperativeHandle(instanceRef, function () {\n    return {\n      openMenu: openMenu,\n      closeMenu: function closeMenu() {\n        return toggleMenu(false);\n      }\n    };\n  });\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [renderButton, /*#__PURE__*/jsx(ControlledMenu, _extends({}, restProps, stateProps, {\n      \"aria-label\": ariaLabel || (typeof button.props.children === 'string' ? button.props.children : 'Menu'),\n      anchorRef: buttonRef,\n      ref: externalRef,\n      onClose: handleClose,\n      skipOpen: skipOpen\n    }))]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Menu.propTypes = /*#__PURE__*/_extends({}, rootMenuPropTypes, uncontrolledMenuPropTypes, {\n  menuButton: oneOfType([element, func]).isRequired\n}) : void 0;\nexport { Menu };","map":{"version":3,"names":["objectWithoutPropertiesLoose","_objectWithoutPropertiesLoose","extends","_extends","forwardRef","useRef","useCallback","useImperativeHandle","Fragment","cloneElement","oneOfType","element","func","ControlledMenu","jsxs","jsx","useMenuStateAndFocus","useCombinedRef","isMenuOpen","safeCall","mergeProps","getName","useMenuChange","uncontrolledMenuPropTypes","rootMenuPropTypes","FocusPositions","Keys","_excluded","Menu","_ref","externalRef","ariaLabel","menuButton","instanceRef","onMenuChange","restProps","_useMenuStateAndFocus","stateProps","toggleMenu","openMenu","isOpen","state","skipOpen","buttonRef","handleClose","e","key","current","focus","onClick","detail","FIRST","undefined","onKeyDown","UP","LAST","DOWN","preventDefault","button","open","type","Error","buttonProps","ref","props","renderButton","closeMenu","children","anchorRef","onClose","process","env","NODE_ENV","propTypes","isRequired"],"sources":["/Users/chengbinfeng/Developer/experiment1/node_modules/@szhsin/react-menu/dist/es/components/Menu.js"],"sourcesContent":["import { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport { forwardRef, useRef, useCallback, useImperativeHandle, Fragment, cloneElement } from 'react';\nimport { oneOfType, element, func } from 'prop-types';\nimport { ControlledMenu } from './ControlledMenu.js';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { useMenuStateAndFocus } from '../hooks/useMenuStateAndFocus.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\nimport { isMenuOpen, safeCall, mergeProps, getName } from '../utils/utils.js';\nimport { useMenuChange } from '../hooks/useMenuChange.js';\nimport { uncontrolledMenuPropTypes, rootMenuPropTypes } from '../utils/propTypes.js';\nimport { FocusPositions, Keys } from '../utils/constants.js';\n\nvar _excluded = [\"aria-label\", \"captureFocus\", \"menuButton\", \"instanceRef\", \"onMenuChange\"];\nvar Menu = /*#__PURE__*/forwardRef(function Menu(_ref, externalRef) {\n  var ariaLabel = _ref['aria-label'],\n      menuButton = _ref.menuButton,\n      instanceRef = _ref.instanceRef,\n      onMenuChange = _ref.onMenuChange,\n      restProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useMenuStateAndFocus = useMenuStateAndFocus(restProps),\n      stateProps = _useMenuStateAndFocus[0],\n      toggleMenu = _useMenuStateAndFocus[1],\n      openMenu = _useMenuStateAndFocus[2];\n\n  var isOpen = isMenuOpen(stateProps.state);\n  var skipOpen = useRef(false);\n  var buttonRef = useRef(null);\n  var handleClose = useCallback(function (e) {\n    toggleMenu(false);\n    if (e.key) buttonRef.current.focus();\n  }, [toggleMenu]);\n\n  var onClick = function onClick(e) {\n    if (skipOpen.current) return;\n    openMenu(e.detail === 0 ? FocusPositions.FIRST : undefined);\n  };\n\n  var onKeyDown = function onKeyDown(e) {\n    switch (e.key) {\n      case Keys.UP:\n        openMenu(FocusPositions.LAST);\n        break;\n\n      case Keys.DOWN:\n        openMenu(FocusPositions.FIRST);\n        break;\n\n      default:\n        return;\n    }\n\n    e.preventDefault();\n  };\n\n  var button = safeCall(menuButton, {\n    open: isOpen\n  });\n  if (!button || !button.type) throw new Error('Menu requires a menuButton prop.');\n\n  var buttonProps = _extends({\n    ref: useCombinedRef(button.ref, buttonRef)\n  }, mergeProps({\n    onClick: onClick,\n    onKeyDown: onKeyDown\n  }, button.props));\n\n  if (getName(button.type) === 'MenuButton') {\n    buttonProps.isOpen = isOpen;\n  }\n\n  var renderButton = /*#__PURE__*/cloneElement(button, buttonProps);\n  useMenuChange(onMenuChange, isOpen);\n  useImperativeHandle(instanceRef, function () {\n    return {\n      openMenu: openMenu,\n      closeMenu: function closeMenu() {\n        return toggleMenu(false);\n      }\n    };\n  });\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [renderButton, /*#__PURE__*/jsx(ControlledMenu, _extends({}, restProps, stateProps, {\n      \"aria-label\": ariaLabel || (typeof button.props.children === 'string' ? button.props.children : 'Menu'),\n      anchorRef: buttonRef,\n      ref: externalRef,\n      onClose: handleClose,\n      skipOpen: skipOpen\n    }))]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Menu.propTypes = /*#__PURE__*/_extends({}, rootMenuPropTypes, uncontrolledMenuPropTypes, {\n  menuButton: oneOfType([element, func]).isRequired\n}) : void 0;\n\nexport { Menu };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}